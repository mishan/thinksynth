# $Id: Makefile.in,v 1.42 2004/06/30 03:47:45 misha Exp $

BINARY = thinksynth

bindir=@bindir@
prefix=@prefix@

all: thinksynth


include ../build.mk

PICFLAGS =
LDFLAGS += @LIBS@ @GTKMM_LIBS@ @GTHREAD_LIBS@ -L../libthink -lthink @JACK_LIBS@ @ALSA_LIBS@
INCLUDES = -I.. -I../libthink @GTKMM_CFLAGS@ @JACK_CFLAGS@ @ALSA_CFLAGS@

# objects not compiled anymore:
# thOSSAudio.o thWav.o

MAINOBJS = main.o ui.o $(WIDGETOBJS) gthALSAAudio.o gthALSAMidi.o gthJackAudio.o gthPrefs.o
MONOMAINOBJS = monotest.o thALSAAudio.o
WIDGETOBJS = gui/MainSynthWindow.o gui/PatchSelWindow.o gui/Keyboard.o gui/KeyboardWindow.o

thinksynth: ../libthink/libthink.so.3 $(MAINOBJS)
	$(CXX) $(CXXFLAGS) -o $@ $(MAINOBJS) $(LDFLAGS)

monotest: ../libthink/libthink.so.3 $(MONOMAINOBJS)
	$(CXX) $(CXXFLAGS) -o $@ $(MONOMAINOBJS) $(LDFLAGS)

../libthink/libthink.so.3:
# XXX
ifeq (,$(wildcard ../libthink/.bstamp))
	$(MAKE) -C ../libthink
endif

clean::
	rm -f thinksynth
	rm -f monotest

distclean::
	rm -f Makefile

install:
	mkdir -p $(DESTDIR)$(bindir)
	cp -f thinksynth $(DESTDIR)$(bindir)

uninstall:
	rm -f $(DESTDIR)$(bindir)/thinksynth
